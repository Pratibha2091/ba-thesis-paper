% !TEX root = ../main.tex

\chapter{Problem definition}
\label{chap:prob-def}
\section{introduction}

This problem is variation of lot sizing problem in stochastic setting. Variation is as follows. Firstly we describe deterministic variant before introducing stochasticity and uncertainty. We have predictions for raw material supply cost $\mathbf{s}$ at future time moment $t$. The \emph{factory} converts all bought raw materials at time $t$ and stores them into a warehouse. Number of discrete time moments is denoted by $n$.

One time moment storage costs fixed amount $h$, that is the holding cost.

Each $t$ we have certain demand we need satifying, denoted as $\mathbf{d}$. In case there's no products in storage to satisfy demand we pay backlogging cost denoted as $b$ per day, for late orders.

Our aim is to optimize our procurement policy by variating $\mathbf{x}$, that is product amount we buy at time moment $t$. However we are constrained by the maximum raw materials we can buy each day by $\mathbf{x_{\text{max}}}$.

\section{Formal problem definition}
\label{sec:Formal problem definition}

\subsection{Definitions}
\label{sub:Definitions}

Every input value is known beforehand, and it's assumed for random variables their distributions are known. Following is deterministic problem variant, and in subsequent chapters randomness and uncertainty is embedded into problem. Font convention:

\begin{align*}
x, y, z && \text{variables and constants} \\
\mathbf{x, y, z} && \text{vector variables and constants} \\
X, Y, Z && \text{random variables} \\
\mathbf{X, Y, Z} && \text{random vectors} \\
\mathcal{X, Y, Z} && \text{probability distributions} \\
\mathbf{A, B, C} && \text{matrices, by context differentiated from random vectors}
\end{align*}

Now following is formal problem description for deterministic variant:

\begin{align*}
    \mathbf{s} &= \begin{bmatrix}
        s_1, s_2, \dotsc, s_n
    \end{bmatrix}^\intercal && \text{Supply cost vector} \\
    \mathbf{x} &= \begin{bmatrix}
        x_1, x_2, \dotsc, x_n
    \end{bmatrix}^\intercal && \text{Procurement quantity vector} \\
    \mathbf{x_{\max}}  & && \text{Procurement quantity limits vector} \\
    \mathbf{d} &= \begin{bmatrix}
        d_1, d_2, \dotsc, d_n
    \end{bmatrix}^\intercal && \text{Demand random vector, $Y_t$ is a random variable} \\
    b & && \text{backlogging cost} \\
    h & && \text{holding cost}
\end{align*}

\subsection{Variables}
\label{sub:Variables}
$\mathbf{x}$ is our decision variable, as described previously.
\subsection{Constraints}
\label{sub:Constraints}
\begin{align*}
    \mathbf{x} &\in \mathbb{N}_0^n \\
    \mathbf{x} &\le \mathbf{x_{\text{max}}}\\
    \sum{x} &= \sum{d} \\
    b &\ge 0\\
    h &\ge 0\\
\end{align*}

\section{Objective function}

\begin{definition}{$c(t)$}
defines total speeding we pay at time $t$.
    \begin{equation}
        \label{eq:cost-t}
        c(t) = + s_t x_t + \begin{cases}
        h \left( \sum_{i=1}^t{x_i} - \sum_{i=1}^t{d_i} \right)  &
            \sum_{i=1}^t{x_i} \ge \sum_{i=1}^t{d_i}  \\
        b \left(\sum_{i=1}^t{d_i} - \sum_{i=1}^t{x_i} \right) &
            \sum_{i=1}^t{x_i} < \sum_{i=1}^t{d_i} \\
        \end{cases}
    \end{equation}
\end{definition}

\begin{definition}{$f(\mathbf{x})$}
    is objective function for this problem. Our aim is to minimize it.
    \begin{equation}
        f(\mathbf{x}) =  \sum_t{c(t)}
        \label{eq:cost-f}
    \end{equation}
\end{definition}
