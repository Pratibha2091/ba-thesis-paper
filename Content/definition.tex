% !TEX root = ../main.tex

\chapter{Problem definition}
\label{chap:prob-def}
\section{introduction}

This problem is a variation of the lot sizing problem in a stochastic setting. Variation is as follows. Firstly we describe deterministic variant before extending the model to stochastic setting. We have predictions for raw material supply cost $\mathbf{s}$ at future time moment $t$. The \emph{factory} converts all bought raw materials at time $t$ and stores them in a warehouse. Number of discrete time moments under consideration is denoted by $n$.

One time moment storage costs fixed amount $h$. The  holding cost is per unit and per time period.

Each time moment, $t$, we have certain demand we need to satify, denoted as $\mathbf{d}_t$. In case there's no products in storage to satisfy demand we allow backlogging incurring a cost denoted as $b$ per unit per day, for late orders.

Our aim is to optimize our procurement policy by choosing $\mathbf{x}$, which is amount of the product we buy at time moment $t$. However we are constrained by the maximum amount raw materials , $\mathbf{x^{\text{(max)}}}$, that we can buy each day.

\section{Formal problem definition}
\label{sec:prob-def}

\subsection{Definitions}
\label{sub:Definitions}

Following is the deterministic problem variant, and in subsequent chapters randomness and uncertainty is embedded into problem. Notation:

\begin{align*}
    \mathbf{s} &= \begin{bmatrix}
        s_1, s_2, \dotsc, s_n
    \end{bmatrix}^\intercal && \text{Supply cost vector} \\
    \mathbf{x} &= \begin{bmatrix}
        x_1, x_2, \dotsc, x_n
    \end{bmatrix}^\intercal && \text{Procurement quantity vector} \\
    \mathbf{x^{(\max)}}  & && \text{Procurement quantity limits vector} \\
    \mathbf{x}^{(b)}  & && \text{Backlogging quantity vector} \\
    \mathbf{x}^{(h)}  & && \text{Holding quantity vector} \\
    \mathbf{d} &= \begin{bmatrix}
        d_1, d_2, \dotsc, d_n
    \end{bmatrix}^\intercal && \text{Demand random vector} \\
    b & && \text{backlogging cost} \\
    h & && \text{holding cost} \\
    n & && \text{number of time moments}
\end{align*}

\unsure{Every variable for backlogging and holding vector seems unintuitive or taken. I hope $\mathbf{x}^{(b)}$ is alright since relation to $\mathbf{x}$ is clearly highlighted}

\subsection{Variables}
\label{sub:Variables}
$\mathbf{x}$ is our decision variable, as described previously. $\mathbf{x}^{(b)}$ and $\mathbf{x}^{(h)}$ are backlogging and holding variables respectively backlogging variables respectively. For simplicity
$x^{(h)}_0$, $x^{(b)}_0$,  $x^{(h)}_n$, $x^{(b)}_n$ are equal to $0$ unless otherwise noted. This specific values are explored further in Section~\ref{sec:Variants}.

\subsection{Constraints}
\label{sub:Constraints}
\begin{align*}
    x_t &\le x^{(\max)}_t & \forall t\\
    x_t &\ge 0 & \forall t\\
    x^{(b)}_t &\ge 0 & \forall t\\
    x^{(h)}_t &\ge 0 & \forall t\\
    x_t + x^{(h)}_{t - 1} + x^{(b)}_{t} &= d_t + x^{(h)}_t + h^{(b)}_{t - 1} & \forall t \\
    x^{(h)}_0 + x^{(b)}_n + \sum_{t=1}^n{x_i} &= \sum_{t=1}^n{d_i} + x^{(b)}_0 + x^{(h)}_n &\\
\end{align*}

\section{Objective function}

\begin{definition}{$c(t)$}
defines total speeding we pay at time $t$.
    \begin{equation}
        \label{eq:cost-t}
        c(t) = s_t x_t + b x^{(b)}_t + h x^{(h)}_t
    \end{equation}
\end{definition}

\begin{definition}{$f$}
    is objective function for this problem. Our aim is to minimize it.
    \begin{equation}
        f =  \sum_t{c(t)} = \sum_t{ s_t x_t + b x^{(b)}_t + h x^{(h)}_t}
        \label{eq:cost-f}
    \end{equation}
\end{definition}
